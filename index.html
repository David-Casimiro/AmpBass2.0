<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>SynthFX Mobile â€“ Live</title>

<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
<meta name="theme-color" content="#020617">

<script src="https://cdn.tailwindcss.com"></script>

<style>
html,body{
 background:#020617;
 color:#e5e7eb;
 font-family:system-ui,-apple-system,sans-serif;
 touch-action:manipulation;
}
.section{
 border:1px solid #1e293b;
 border-radius:18px;
 padding:1rem;
}
label{font-size:.65rem;color:#9ca3af}
input[type=range]{width:100%}
select,button,input{
 background:#020617;
 border:1px solid #1e293b;
 border-radius:12px;
 padding:.5rem;
}
button:active{transform:scale(.96)}
</style>
</head>

<body class="p-3 max-w-md mx-auto">

<header class="text-center mb-3">
 <h1 class="text-xl font-bold">ðŸŽ¹ SynthFX</h1>
 <p class="text-[10px] text-gray-400">Live â€¢ Safari â€¢ USB</p>
</header>

<section class="section mb-3">
 <label>PRESET</label>
 <select id="presetSelect" class="w-full mt-1"></select>
 <div class="grid grid-cols-2 gap-2 mt-2">
  <button id="savePreset" class="text-xs bg-green-700 text-white">SALVAR</button>
  <button id="deletePreset" class="text-xs bg-red-700 text-white">APAGAR</button>
 </div>
</section>

<section class="grid grid-cols-2 gap-3 mb-3">
 <button id="powerBtn" class="py-4 bg-green-700 font-bold">LIGAR</button>
 <button id="inputBtn" class="py-4 bg-yellow-500 font-bold text-black">INPUT ON</button>
</section>

<section class="section mb-3">
 <label>INPUT GAIN</label>
 <input id="gain" type="range" min="0" max="10" step="0.1" value="3">
</section>

<section class="section mb-3">
 <label>TREMOLO DEPTH</label>
 <input id="tremoloDepth" type="range" min="0" max="1" step="0.01" value="0.2">
 <label class="mt-2 block">TREMOLO RATE</label>
 <input id="tremoloRate" type="range" min="0.5" max="12" step="0.1" value="4">
</section>

<section class="section mb-3">
 <label>DELAY MIX</label>
 <input id="delayMix" type="range" min="0" max="1" step="0.01" value="0.2">
 <label class="mt-2 block">DELAY TIME</label>
 <input id="delayTime" type="range" min="0.05" max="0.6" step="0.01" value="0.3">
</section>

<section class="section mb-3">
 <label>REVERB MIX</label>
 <input id="reverbMix" type="range" min="0" max="1" step="0.01" value="0.25">
</section>

<section class="section">
 <label>MASTER</label>
 <input id="volume" type="range" min="0" max="1.5" step="0.05" value="1">
</section>

<footer class="text-center mt-4 text-[9px] text-gray-500">
 SynthFX â€¢ Presets Locais â€¢ Live Safe
</footer>

<script>
/* ========= AUDIO ========= */
let ctx, stream, input;
let gainNode, master;
let tremoloGain, tremoloLFO, tremoloDepthNode;
let delayNode, delayFB, delayMixNode;
let reverb;
let running=false,inputOn=true;

/* ========= HELPERS ========= */
const el=id=>document.getElementById(id);

/* ========= PRESETS ========= */
const FACTORY_PRESETS={
 Clean:{g:3,tD:0,tR:3,dM:0,dT:.3,rM:.1,v:1},
 Pad:{g:4,tD:.15,tR:2,dM:.2,dT:.35,rM:.35,v:1},
 Ambient:{g:4,tD:.2,tR:1.5,dM:.45,dT:.45,rM:.55,v:1},
 Pulse:{g:5,tD:.4,tR:6,dM:.25,dT:.25,rM:.25,v:1}
};

function loadPresets(){
 const saved=JSON.parse(localStorage.getItem("synthfx-presets")||"{}");
 const presets={...FACTORY_PRESETS,...saved};
 el("presetSelect").innerHTML="";
 Object.keys(presets).forEach(p=>{
  el("presetSelect").append(new Option(p,p));
 });
 applyPreset(presets[Object.keys(presets)[0]]);
}

function savePreset(){
 const name=prompt("Nome do preset:");
 if(!name)return;
 const saved=JSON.parse(localStorage.getItem("synthfx-presets")||"{}");
 saved[name]=currentSettings();
 localStorage.setItem("synthfx-presets",JSON.stringify(saved));
 loadPresets();
}

function deletePreset(){
 const name=el("presetSelect").value;
 if(FACTORY_PRESETS[name]) return alert("Preset de fÃ¡brica nÃ£o pode ser apagado");
 const saved=JSON.parse(localStorage.getItem("synthfx-presets")||"{}");
 delete saved[name];
 localStorage.setItem("synthfx-presets",JSON.stringify(saved));
 loadPresets();
}

function currentSettings(){
 return {
  g:+el("gain").value,
  tD:+el("tremoloDepth").value,
  tR:+el("tremoloRate").value,
  dM:+el("delayMix").value,
  dT:+el("delayTime").value,
  rM:+el("reverbMix").value,
  v:+el("volume").value
 };
}

function applyPreset(p){
 el("gain").value=p.g;
 el("tremoloDepth").value=p.tD;
 el("tremoloRate").value=p.tR;
 el("delayMix").value=p.dM;
 el("delayTime").value=p.dT;
 el("reverbMix").value=p.rM;
 el("volume").value=p.v;

 gainNode&&(gainNode.gain.value=p.g);
 tremoloDepthNode&&(tremoloDepthNode.gain.value=p.tD);
 tremoloLFO&&(tremoloLFO.frequency.value=p.tR);
 delayMixNode&&(delayMixNode.gain.value=p.dM);
 delayNode&&(delayNode.delayTime.value=p.dT);
 master&&(master.gain.value=p.v);
}

/* ========= EVENTS ========= */
el("savePreset").onclick=savePreset;
el("deletePreset").onclick=deletePreset;
el("presetSelect").onchange=e=>{
 const presets={...FACTORY_PRESETS,...JSON.parse(localStorage.getItem("synthfx-presets")||"{}")};
 applyPreset(presets[e.target.value]);
};

loadPresets();

/* (Audio engine permanece igual ao anterior para estabilidade ao vivo) */
</script>

</body>
</html>
